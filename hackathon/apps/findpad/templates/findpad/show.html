<html>
	<head>
		{% load staticfiles %}
		<link rel="stylesheet" type="text/css" href="{% static 'findpad/style.css'%}">
		<script   src="https://code.jquery.com/jquery-1.12.2.js"   integrity="sha256-VUCyr0ZXB5VhBibo2DkTVhdspjmxUgxDGaLQx7qb7xY="   crossorigin="anonymous"></script>
	</head>
	<body>
		<script type="text/javascript">
			$(document).ready(function() {
				
				$('#btn').click(function(event) {
					$('#hide').toggle()
					$(this).toggle()
				});

			});

		</script>
		<script type="text/javascript">
		var map;
		function initMap() {
				map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 47.610261, lng: -122.336721},
				zoom: 15
			});

			var address_input = document.getElementById('addressInput');
			var addText = address_input.innerText;
			console.log(addText)
			geocoder = new google.maps.Geocoder();
			console.log(geocoder)
			geocoder.geocode({address: addText}, function(results, status) {
				if (status == google.maps.GeocoderStatus.OK) {
	      			var myResult = results[0].geometry.location;
		      		createMarker(myResult);
					map.setCenter(myResult);
				}
			});
		}
		function createMarker(latlng) {
			if(marker != undefined && marker != ''){
				marker.setMap(null);
				marker = '';
			}	

			var marker = new google.maps.Marker({
			map: map,
			position: latlng
		  });
		}
		</script>
		<a href="{% url 'show' %}" class='back'>BACK</a>
		<div class='container'>
			<h2>Lister: {{listing.lister}}</h2>
			<h3 id='addressInput'>{{listing.address}}</h3>
			<p>{{listing.description}}</p>
			<p>Number of Bedrooms: {{listing.bedrooms}}</p>
			<p>Rent per Month: {{listing.rent}}</p>
			<p>Allows Pets? {{listing.pets}}</p>
			<p>Washer/Dryer? {{listing.washer}}</p>
			<button id='btn'>REQUEST RENTAL</button><br>
			<form id='hide' action='{% url "send" listing.lister.id %}' method='POST'>{% csrf_token %}
				<textarea placeholder='write a message!' name='content'></textarea><br>
				<input type='submit' value='SEND'>
			</form>
		</div>
		<div id="map"></div>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvcC2eu0TP2W_QwrkzRQDVeJB5Hh6oCFk&callback=initMap"
	async defer></script>
	</body>
</html>